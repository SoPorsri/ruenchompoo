<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<title>Print POS Mobile Ready (Mock + HTTPS)</title>
<style>
body { font-family: "Tahoma", "Noto Sans Thai", sans-serif; font-size:12px; }
pre { background:#f4f4f4; padding:10px; white-space: pre-wrap; word-wrap: break-word; border:1px solid #ccc; }
button { margin-top:10px; padding:5px 10px; font-size:14px; }
</style>
</head>
<body>
<h3>Preview ใบเสร็จ (ESC/POS)</h3>
<pre id="preview">ESC/POS preview here</pre>
<button onclick="testPing()">ทดสอบเชื่อมต่อ</button>
<button onclick="mockPrint()">สั่งพิมพ์ mock</button>

<script>
let ESCString = '*** นี่คือข้อความ mock ESC/POS ***';
const PRINTER_IP = '192.168.1.100'; // mock

async function testPing() {
  try {
    const resp = await fetch('https://192.168.1.88:8443/ping');
    const data = await resp.json();
    alert('เชื่อมต่อสำเร็จ: ' + JSON.stringify(data));
  } catch(e) {
    alert('เชื่อมต่อไม่ได้: ' + e);
  }
}

async function mockPrint() {
  try {
    const resp = await fetch('https://192.168.1.88:8443/print',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({printer_ip:PRINTER_IP, escpos:ESCString})
    });
    const data = await resp.json();
    alert(data.message);
  } catch(e) {
    alert('❌ ไม่สามารถเชื่อมต่อเครื่องพิมพ์ได้: '+e);
  }
}
</script>
</body>
</html>
